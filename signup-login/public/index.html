<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signup/Login Form</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background-image: url('https://thumbs.dreamstime.com/b/elegant-beige-floral-background-delicate-abstract-flowers-leaves-perfect-invitations-cards-wallpaper-designs-327017580.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: #f9c74f;
            font-family: 'Arial', sans-serif;
            height: 180vh;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .signup-container {
            background-color: rgba(28, 28, 28, 0.9); /* Darker background with opacity */
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 30px rgba(255, 215, 0, 0.4);
            width: 120%; /* Set width to 90% of the parent container */
            max-width: 500px; /* Set a smaller max width */
            animation: fadeInUp 1s ease-out;
        }

        @keyframes fadeInUp {
            0% {
                opacity: 0;
                transform: translateY(30px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        fieldset {
            border: 2px solid #f9c74f;
            padding: 20px;
            border-radius: 10px;
        }

        legend {
            color: #f9c74f;
            font-weight: bold;
            font-size: 1.3em;
            text-align: center;
        }

        .form-group label {
            font-weight: bold;
            color: #f9c74f;
        }

        .form-control {
            background-color: #222;
            color: #f9c74f;
            border: 1px solid #f9c74f;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            border-color: #f9c74f;
            box-shadow: 0 0 8px rgba(255, 215, 0, 0.6);
        }

        .btn-custom {
            background-color: #f9c74f;
            color: black;
            width: 100%;
            transition: background-color 0.3s ease;
        }

        .btn-custom:hover {
            background-color: #f4a261;
            color: white;
        }

        .btn-secondary {
            background-color: #333;
            color: #f9c74f;
            width: 100%;
            margin-top: 10px;
        }

        .btn-secondary:hover {
            background-color: #444;
            color: white;
        }

        .form-group a {
            color: #f9c74f;
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s ease;
        }

        .form-group a:hover {
            color: #f4a261;
        }

        .logout-btn {
            background-color: #f9c74f;
            color: black;
            margin-top: 20px;
            width: 100%;
        }

        .logout-btn:hover {
            background-color: #b8860b;
            color: white;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-6 signup-container">
                <form name="signupform" id="signupform" onsubmit="return handleSignup(event)">
                    <fieldset>
                        <legend>Signup Form</legend>
                        <div class="form-group">
                            <label for="fname">First Name</label>
                            <input type="text" class="form-control" id="fname" name="fname" placeholder="required" required>
                        </div>
                        <div class="form-group">
                            <label for="lname">Last Name</label>
                            <input type="text" class="form-control" id="lname" name="lname">
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" class="form-control" id="email" name="email" placeholder="required" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" class="form-control" id="phone" name="phone" placeholder="required" required>
                        </div>
                        <div class="form-group">
                            <label for="address">Address</label>
                            <input type="text" class="form-control" id="address" name="address" placeholder="required" required>
                        </div>
                        <div class="form-group">
                            <label for="dob">Date of Birth</label>
                            <input type="date" class="form-control" id="dob" name="dob" required>
                        </div>
                        <div class="form-group">
                            <label for="gender">Gender</label>
                            <select class="form-control" id="gender" name="gender" required>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="country">Country</label>
                            <input type="text" class="form-control" id="country" name="country" placeholder="required" required>
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" class="form-control" id="password" name="password" placeholder="required" required>
                        </div>
                        <div class="form-group">
                            <label for="confirmPassword">Confirm Password</label>
                            <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" placeholder="required" required>
                        </div>
                        <div class="form-group text-center">
                            <button type="submit" class="btn btn-custom">Sign Up</button>
                            <button type="reset" class="btn btn-secondary">Reset</button>
                        </div>
                        <div class="form-group text-center">
                            <a href="#" onclick="showLoginForm()">Already have an account? Login</a>
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>

    <script>
   // Handle the signup form submission
function handleSignup(event) {
    event.preventDefault();  // Prevent form submission to handle it with JavaScript

    // Collect form data using FormData API
    const formData = new FormData(document.getElementById('signupform'));

    // Validate required fields
    const fname = formData.get('fname');
    const email = formData.get('email');
    const password = formData.get('password');
    const confirmPassword = formData.get('confirmPassword');
    
    if (!fname || !email || !password || !confirmPassword) {
        alert('Please fill in all required fields.');
        return;
    }

    // Check if passwords match
    if (password !== confirmPassword) {
        alert('Passwords do not match.');
        return;
    }

    // Construct the user data object
    const userData = {
        fname: formData.get('fname'),
        lname: formData.get('lname'),
        email: formData.get('email'),
        phone: formData.get('phone'),
        address: formData.get('address'),
        dob: formData.get('dob'),
        gender: formData.get('gender'),
        country: formData.get('country'),
        password: formData.get('password'),
    };

    // Send data to the server using fetch
    fetch('/save-data', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(userData),
    })
    .then(response => response.json())
    .then(data => {
        // Handle success
        if (data.message === 'User data saved successfully!') {
            alert(data.message);  // Success message
            document.getElementById('signupform').reset();  // Reset form after successful submission
        } else if (data.message === 'Email is already in use. Please use a different email.') {
            alert(data.message);  // Show error if email is already in use
        } else {
            alert('Something went wrong. Please try again later.');
        }
    })
    .catch(error => {
        console.error('Error:', error);  // Log any fetch errors
        alert('There was an error saving your data.');
    });
}

    </script>
</body>
</html>
